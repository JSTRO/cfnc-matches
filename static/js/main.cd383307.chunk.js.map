{"version":3,"sources":["App.js","index.js"],"names":["App","useState","matches","setMatches","findMatches","rows","map","row1","row1_email","trim","toLowerCase","row1_gender","row1_age","row1_pref","row1_interest","row1_religion_important","row1_religion","row1_children","row1_politics_important","row1_politics","filter","row2","row2_email","row2_gender","row2_age","row2_pref","row2_interest","row2_religion_important","row2_religion","row2_children","row2_politics_important","row2_politics","row","match","length","uniq","uniqBy","item","JSON","stringify","unshift","className","type","name","accept","onChange","e","readable","target","files","papa","parse","header","complete","data","handleChange","Button","variant","onClick","alert","csvContent","join","encodedUri","encodeURI","window","open","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iQA2FeA,MApFf,WAAgB,IAAD,EAEiBC,mBAAS,IAF1B,mBAENC,EAFM,KAEGC,EAFH,KAyBPC,EAAc,SAAAC,GAClB,IAoCIH,EApCSG,EAAKC,KAAI,SAAAC,GACpB,IAAMC,EAAaD,EAAK,iBAAiBE,OAAOC,cAC1CC,EAAcJ,EAAK,UACnBK,EAAWL,EAAK,aAChBM,EAAYN,EAAK,+BACjBO,EAAgBP,EAAK,2CACrBQ,EAA0BR,EAAK,8DAC/BS,EAAgBT,EAAK,0BAA0BE,OAAOC,cACtDO,EAAgBV,EAAK,iCACrBW,EAA0BX,EAAK,0EAC/BY,EAAgBZ,EAAK,mCAAmCE,OAAOC,cACrE,MAAQ,CACNF,EACAH,EAAKe,QAAO,SAAAC,GACV,IAAMC,EAAaD,EAAK,iBAAiBZ,OAAOC,cAC1Ca,EAAcF,EAAK,UACnBG,EAAWH,EAAK,aAChBI,EAAYJ,EAAK,+BACjBK,EAAgBL,EAAK,2CACrBM,EAA0BN,EAAK,8DAC/BO,EAAgBP,EAAK,0BAA0BZ,OAAOC,cACtDmB,EAAgBR,EAAK,iCACrBS,EAA0BT,EAAK,0EAC/BU,EAAgBV,EAAK,mCAAmCZ,OAAOC,cACrE,OACGF,IAAec,GACfT,IAAcU,GAAiBZ,IAAgBc,GAC/CX,IAAkBU,GAAcZ,IAAac,IAChB,QAA5BX,GAAiE,QAA5BY,EAAqCX,IAAkBY,EAAgB,QAChF,QAA5BV,GAAiE,QAA5BY,EAAqCX,IAAkBY,EAAgB,OAC7Gd,IAAkBY,KAEpBvB,KAAI,SAAA0B,GAAG,OAAIA,EAAI,wBAIHZ,QAAO,SAAAa,GAAK,OAAIA,EAAM,GAAGC,OAAS,KAClC5B,KAAI,SAAA2B,GAAK,MAAI,CAACA,EAAM,GAAIE,eAAKF,EAAM,QAItD,OAHA/B,EAAUkC,iBAAOlC,GAAS,SAAAmC,GAAI,OAAIC,KAAKC,UAAUF,OAEzCG,QAAQ,CAAC,QAAS,YACnBtC,GAET,OACE,yBAAKuC,UAAU,OACb,yBAAKA,UAAU,mBACb,6CACA,yBAAKA,UAAU,SACb,2BAAOC,KAAK,OAAOC,KAAK,OAAOC,OAAO,OAAOC,SAAU,SAAAC,GAAC,OAtE3C,SAAAA,GAAM,IAEnBC,EADYD,EAAEE,OAAZC,MACe,GACvBC,IAAKC,MAAMJ,EAAU,CACnBK,QAAQ,EACRC,SAAU,SAAAC,GACRnD,EAAWC,EAAYkD,EAAKA,UAgEkCC,CAAaT,MACzE,kBAACU,EAAA,EAAD,CAAQC,QAAQ,UAAUC,QA5Dd,WAClB,GAAIxD,EAAQgC,OAAS,EACnByB,MAAM,6BACD,CACL,IAAIC,EAAa,+BAAiC1D,EAAQI,KAAI,SAAAwC,GAAC,OAAIA,EAAEe,KAAK,QAAMA,KAAK,MAC/EC,EAAaC,UAAUH,GAC7BI,OAAOC,KAAKH,MAsDR,wBC7EVI,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.cd383307.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Button from 'react-bootstrap/Button'\nimport papa from 'papaparse'\nimport { uniq, uniqBy } from 'lodash'\n\nfunction App() {\n\n  const [matches, setMatches] = useState([])\n\n  const handleChange = e => {\n    const { files } = e.target\n    const readable = files[0]\n    papa.parse(readable, {\n      header: true,\n      complete: data => {\n        setMatches(findMatches(data.data))\n      }\n    });\n  }\n  \n  const handleClick = () => {\n    if (matches.length < 1) {\n      alert(\"Please choose a file.\")\n    } else {\n      let csvContent = \"data:text/csv;charset=utf-8,\" + matches.map(e => e.join(\",\")).join(\"\\n\")\n      const encodedUri = encodeURI(csvContent)\n      window.open(encodedUri)\n    }\n  }\n\n  const findMatches = rows => {\n    const data = rows.map(row1 => {\n      const row1_email = row1['Email Address'].trim().toLowerCase()\n      const row1_gender = row1['I am a']\n      const row1_age = row1['I am aged']\n      const row1_pref = row1['I am interested in dating a']\n      const row1_interest = row1['I am interested in dating someone aged ']\n      const row1_religion_important = row1['It is important that my partner is the same religion as me']\n      const row1_religion = row1['What religion are you?'].trim().toLowerCase()\n      const row1_children = row1['Do you want to have children?']\n      const row1_politics_important = row1['It is important that my partner has the same political beliefs as I do']\n      const row1_politics = row1['If so, my political beliefs are'].trim().toLowerCase()\n      return ([\n        row1_email,\n        rows.filter(row2 => { // TODO: trim and standardize case\n          const row2_email = row2['Email Address'].trim().toLowerCase()\n          const row2_gender = row2['I am a']\n          const row2_age = row2['I am aged']\n          const row2_pref = row2['I am interested in dating a']\n          const row2_interest = row2['I am interested in dating someone aged ']\n          const row2_religion_important = row2['It is important that my partner is the same religion as me']\n          const row2_religion = row2['What religion are you?'].trim().toLowerCase()\n          const row2_children = row2['Do you want to have children?']\n          const row2_politics_important = row2['It is important that my partner has the same political beliefs as I do']\n          const row2_politics = row2['If so, my political beliefs are'].trim().toLowerCase()\n          return (\n            (row1_email !== row2_email) && // Cannot match with yourself\n            (row1_pref === row2_gender) && (row1_gender === row2_pref) &&\n            (row1_interest === row2_age) && (row1_age === row2_interest) &&\n            ((row1_religion_important === 'Yes' || row2_religion_important === 'Yes') ? row1_religion === row2_religion : null) &&\n            ((row1_politics_important === 'Yes' || row2_politics_important === 'Yes') ? row1_politics === row2_politics : null) &&\n            (row1_children === row2_children) \n          )\n        }).map(row => row['Email Address'])\n      ])\n    })\n\n    let matches = data.filter(match => match[1].length > 0) // Remove rows with no matches\n                      .map(match => [match[0], uniq(match[1])]) \n    matches = uniqBy(matches, item => JSON.stringify(item)) // Only include unique entries\n    // Add headers\n    matches.unshift(['email', 'matches'])\n    return matches\n  } \n  return (\n    <div className=\"App\">\n      <div className=\"container-fluid\">\n        <h1>#CFNC Matches</h1>\n        <div className=\"input\">\n          <input type=\"file\" name=\"file\" accept=\".csv\" onChange={e => handleChange(e)}/>\n          <Button variant=\"success\" onClick={handleClick}>\n            Download Matches\n          </Button> \n        </div>\n      </div>  \n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}